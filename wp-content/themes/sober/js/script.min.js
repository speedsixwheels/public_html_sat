(function(g){"use strict";var v=v||{};v.init=function(){this.$window=g(window);this.$body=g(document.body);this.$sideMenu=g(".side-menu");this.data=soberData||{};this.closeTopbar();this.menuHover();this.toggleSideMenu();this.toggleModal();this.removeCartItem();this.toggleTabs();this.focusInputs();this.productsTabs();this.sortProducts();this.productQuantity();this.productImagesLightbox();this.stickyProductSummary();this.sideProductsCarousel();this.productImageSlider();this.productImageZoom();this.stickUpSells();this.checkBox();this.formatGallery();this.backToTop();this.toggleProductFilter();this.productQuickView();this.instanceSearch();this.fakeScrollbar();this.stickyHeader();this.navAjax();this.portfolioFilter();this.productVariationSwatches();this.productGalleryZoom();this.productGallerySlider();this.productFullWidth();this.productBackground();this.relatedProductsCarousel();this.upsellProductsCarousel();this.singeProductAjaxAddToCart();this.openCartModalAfterAdd();this.pageHeaderParallax();this.responsive();this.preload();this.popup();this.addedToCartNotice();this.loginModalAuthenticate();this.lazyLoadImages();this.$body.trigger("sober_init",[v])};v.isBlocked=function(e){return e.is(".processing")||e.parents(".processing").length};v.block=function(e){if(!v.isBlocked(e)){e.addClass("processing").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})}};v.unblock=function(e){e.removeClass("processing").unblock()};v.isVisible=function(e){if(e instanceof jQuery){e=e[0]}var t=e.getBoundingClientRect();return t.bottom>0&&t.right>0&&t.left<(window.innerWidth||document.documentElement.clientWidth)&&t.top<(window.innerHeight||document.documentElement.clientHeight)};v.formatGallery=function(){g(".entry-gallery").addClass("owl-carousel").owlCarousel({singleItem:true,items:1,navSpeed:800,nav:true,dots:false,autoplay:true,dotsSpeed:1e3,rtl:v.data.isRTL==="1",navText:['<svg viewBox="0 0 20 20"><use xlink:href="#left-arrow"></use></svg>','<svg viewBox="0 0 20 20"><use xlink:href="#right-arrow"></use></svg>']})};v.checkBox=function(){g("#ship-to-different-address").find(".input-checkbox").on("change",function(){if(g(this).is(":checked")){g(this).parent().find(".checkbox").addClass("checked")}else{g(this).parent().find(".checkbox").removeClass("checked")}}).trigger("change")};v.navAjax=function(){v.$body.on("click",".ajax-navigation a",function(e){e.preventDefault();var t=g(this),n=t.parent(),r=g("#main"),l=t.attr("href");if(n.hasClass("loading")){return}n.addClass("loading");g.get(l,function(e){var t=g(e),o=t.find("title").text();if(n.hasClass("posts-navigation")){var a=g(t.find("#main").html());a.hide();r.append(a);a.fadeIn(1e3);n.remove()}else if(n.hasClass("portfolio-navigation")){var i=t.find(".portfolio-items .portfolio"),s=t.find(".ajax-navigation a");if(i.length){i.imagesLoaded(function(){r.find(".portfolio-items").isotope("insert",i)});n.removeClass("loading");if(s.length){n.html(s)}else{n.fadeOut()}}}window.history.pushState(null,o,l);v.$body.trigger("post-load")})});if("ajax"===v.data.shop_nav_type||"infinity"===v.data.shop_nav_type){v.$body.on("click",".woocommerce-pagination .next",function(e){e.preventDefault();var t=g(this),o=t.closest(".woocommerce-pagination"),a=o.prev("ul.products"),i=t.attr("href");if(t.hasClass("loading")){return}t.addClass("loading");n(i,a,function(e){var t=g(e).find(".woocommerce-pagination");if(t.length){o.html(t.html())}else{o.html("")}})})}if("infinity"===v.data.shop_nav_type){var o=g(".woocommerce-pagination"),a=o.find(".next"),e=g("ul.products");if(a.length){var t=false,i;v.$window.on("scroll",function(){if(t){return}o=g(".woocommerce-pagination");a=g(".next",o);t=true;clearTimeout(i);s();setTimeout(function(){t=false},100);i=setTimeout(function(){t=false;s()},200)})}var s=function(){if(v.isVisible(o)&&a.length){if(a.hasClass("loading")){return}a.addClass("loading");n(a.attr("href"),e,function(e){var t=g(e).find(".woocommerce-pagination");if(t.length){o.html(t.html());a=o.find(".next")}else{o.html("");a.length=0}})}}}function n(o,i,s){g.get(o,function(e){var t=g(e).find("#primary"),a=t.find("ul.products").children();if("isotope"===v.data.tab_behaviour){a.imagesLoaded(function(){var o=0;a.each(function(e,t){setTimeout(function(){i.isotope("insert",t);v.$body.trigger("sober_products_loaded",[t])},e*100);o++});setTimeout(function(){i.isotope("layout")},o*100)})}else{a.each(function(e,t){g(t).css("animation-delay",e*100+"ms")});a.addClass("soberFadeInUp soberAnimation");a.appendTo(i);if(a.length){v.$body.trigger("sober_products_loaded",[a])}}if("function"===typeof s){s(e)}window.history.pushState(null,"",o)})}};v.closeTopbar=function(){g("#topbar").on("click",".close",function(e){e.preventDefault();var t=g(this).closest("#topbar");if(v.data.sticky_header!=="none"){t.css({position:"absolute",top:0,left:0,width:"100%"}).slideUp();g("#masthead").animate({top:0});var o=t.css("margin-bottom");g("#page").css({paddingTop:o})}else{t.slideUp()}})};v.menuHover=function(){var e={none:["show","hide"],fade:["fadeIn","fadeOut"],slide:["slideDown","slideUp"]};var t=v.data.menu_animation?e[v.data.menu_animation]:"fade";g(".site-navigation li, .topbar-menu li").on("mouseenter",function(){var e=g(this);if(!e.hasClass("mega-sub-menu")){e.addClass("active").children(".sub-menu").stop(true,true)[t[0]]()}}).on("mouseleave",function(){var e=g(this);if(!e.hasClass("mega-sub-menu")){g(this).removeClass("active").children(".sub-menu").stop(true,true).delay(100)[t[1]]()}})};v.toggleModal=function(){v.$body.on("click",'[data-toggle="modal"]',function(e){e.preventDefault();var t=g(this),o=g("#"+t.data("target")),a=t.data("tab");if(!o.length){return}v.openModal(o,a)});v.$body.on("click",".close-modal, .sober-modal-backdrop",function(e){e.preventDefault();v.closeModal()});g(document).on("keyup",function(e){if(e.keyCode===27){v.closeModal()}})};v.openModal=function(e,t){e=e instanceof jQuery?e:g(e);if(!e.length){return}v.$body.addClass("modal-open");e.fadeIn();e.addClass("open");if(t){var o=e.find(".tab-nav").filter('[data-tab="'+t+'"]');o.trigger("click")}};v.closeModal=function(){v.$body.removeClass("modal-open");var e=g(".sober-modal.open");e.fadeOut(function(){g(this).removeClass("open")});v.$body.trigger("sober_modal_closed",[e])};v.removeCartItem=function(){var o=g("#cart-modal");o.on("click",".remove",function(e){e.preventDefault();o.addClass("loading");v.block(o);var t=g(this).attr("href");g.get(t,function(){v.$body.trigger("wc_fragment_refresh")},"html")});v.$body.on("wc_fragments_refreshed",function(){o.removeClass("loading");v.unblock(o)})};v.toggleSideMenu=function(){v.$body.on("click",".toggle-nav",function(){var e="#"+g(this).data("target");g(e).toggleClass("open");v.$body.toggleClass("side-menu-opened")});v.$body.on("click",".side-menu-backdrop",function(){g(".side-menu").removeClass("open");v.$body.removeClass("side-menu-opened")});v.$sideMenu.find(".menu > .menu-item-has-children, .menu > ul > .menu-item-has-children").filter(function(){return g(this).hasClass("current-menu-item")||g(this).hasClass("current-menu-ancestor")}).addClass("open");v.$sideMenu.on("click",".menu > .menu-item-has-children > a, .menu > ul > .menu-item-has-children > a",function(e){var t=g(this).parent();if(t.hasClass("open")&&t.hasClass("clicked")){return true}e.stopPropagation();e.preventDefault();t.addClass("clicked");t.toggleClass("open").children("ul").slideToggle();t.siblings(".open").removeClass("open").children("ul").slideUp()}).on("click",".menu > .menu-item-has-children > .toggle, .menu > ul > .menu-item-has-children > .toggle",function(e){e.stopPropagation();e.preventDefault();var t=g(this).parent();t.toggleClass("open").children("ul").slideToggle();t.siblings(".open").removeClass("open").children("ul").slideUp()})};v.focusInputs=function(){g(".woocommerce-account, .woocommerce-checkout").on("focus",".input-text",function(){g(this).closest(".form-row").addClass("active")}).on("focusout",".input-text",function(){if(g(this).val()===""){g(this).closest(".form-row").removeClass("active")}}).find(".input-text").each(function(){if(g(this).val()!==""){g(this).closest(".form-row").addClass("active")}});g("#commentform").on("focus",":input",function(){g(this).closest("p").addClass("active")}).on("focusout",":input",function(){if(g(this).val()===""){g(this).closest("p").removeClass("active")}}).find(":input").each(function(){if(g(this).val()!==""){g(this).closest("p").addClass("active")}})};v.toggleTabs=function(){v.$body.on("click",".tabs-nav .tab-nav",function(){var e=g(this),t=e.data("tab");if(e.hasClass("active")){return}e.addClass("active").siblings(".active").removeClass("active");e.closest(".tabs-nav").next(".tab-panels").children('[data-tab="'+t+'"]').addClass("active").siblings(".active").removeClass("active")})};v.productsTabs=function(){var e=g(".shop-toolbar .products-filter");if(!e.length){return}if("isotope"==v.data.tab_behaviour){v.isotopeProductTabs()}else if("ajax"==v.data.tab_behaviour){v.ajaxProductTabs()}else{e.on("click","li",function(){g(this).addClass("active").siblings(".active").removeClass("active")})}v.$body.on("soo_filter_request_success",function(){g("li:first",".products-filter").addClass("active").siblings(".active").removeClass("active")})};v.isotopeProductTabs=function(){var e=g(".woocommerce.archive .site-content ul.products");var t={itemSelector:".product",transitionDuration:700,layoutMode:"fitRows",isOriginLeft:!(v.data.isRTL==="1"),hiddenStyle:{opacity:0,transform:"translate3d(0,50px,0)"},visibleStyle:{opacity:1,transform:"none"}};e.isotope(t);e.imagesLoaded().progress(function(){e.isotope("layout")});e.on("jetpack-lazy-loaded-image","img",function(){if(!e.data("isotope")){return}g(this).imagesLoaded(function(){e.isotope("layout")})});g(".product-images__slider",e).on("initialized.owl.carousel",function(){e.isotope("layout")});g(".shop-toolbar .products-filter").on("click","li",function(e){e.preventDefault();e.stopPropagation();var t=g(this),o=t.attr("data-filter");if(t.hasClass("active")){return}t.addClass("active").siblings(".active").removeClass("active");t.closest(".shop-toolbar").next("ul.products").isotope({filter:o})});v.$body.on("soo_filter_request_success",function(){setTimeout(function(){g("ul.products","#primary").imagesLoaded(function(){g(this.elements).isotope(t)})},100)})};v.ajaxProductTabs=function(){g(".shop-toolbar .products-filter").on("click","li",function(e){e.preventDefault();e.stopPropagation();var t=g(this),s=t.closest(".shop-toolbar").next("ul.products"),n=s.next(".woocommerce-pagination"),r=t.children("a").attr("href");if(t.hasClass("active")){return}g(":input",".soo-product-filter-widget").not(":button, :submit, :reset").val("").removeAttr("checked").removeAttr("selected");g(".selected",".soo-product-filter-widget").removeClass("selected");g(".filter-slider",".soo-product-filter-widget").each(function(){var e=g(this),t=e.slider("option");e.slider("values",[t.min,t.max]);v.$body.trigger("soo_price_filter_create",[t.min,t.max,e])});if(!s.length){t.closest(".shop-toolbar").next(".woocommerce-info").replaceWith('<ul class="products"/>');s=t.closest(".shop-toolbar").next("ul.products")}t.addClass("active").siblings(".active").removeClass("active");s.addClass("loading");s.append('<li class="loading-overlay"><span class="loading-icon">\n'+'<span class="bubble"><span class="dot"></span></span>\n'+'<span class="bubble"><span class="dot"></span></span>\n'+'<span class="bubble"><span class="dot"></span></span>\n'+"</span></li>");n.fadeOut();g.get(r,function(e){var t=g(e).find("#primary"),o=g("ul.products",t).children(),a=g(".woocommerce-info",t),i=g(".woocommerce-pagination",t);if(o.length){g(".woocommerce-result-count").html(g(".woocommerce-result-count",t).html());o.addClass("soberFadeInUp soberAnimation");o.each(function(e){g(this).css("animation-delay",e*100+"ms")});s.html(o).removeClass("loading");if(i.length){if(n.length){n.html(i.html()).fadeIn()}else{n=i;n.insertAfter(s)}}else{n.html("").fadeOut()}v.$body.trigger("sober_products_loaded",[o])}else{g(".woocommerce-result-count").html("");s.html("").append(g("<li/>").append(a));n.html("").fadeOut()}window.history.pushState(null,"",r)})})};v.sortProducts=function(){if(!g.fn.select2){return}g(".woocommerce-ordering select").select2({minimumResultsForSearch:-1,width:"auto",dropdownAutoWidth:true})};v.productQuantity=function(){v.$body.on("click",".quantity .increase, .quantity .decrease",function(e){e.preventDefault();var t=g(this),o=t.siblings(".qty"),a=parseFloat(o.val()),i=parseFloat(o.attr("min")),s=parseFloat(o.attr("max")),n=parseFloat(o.attr("step"));a=a?a:0;i=i?i:0;s=s?s:a+1;n=n?n:1;if(t.hasClass("decrease")&&a>i){o.val(a-n);o.trigger("change")}if(t.hasClass("increase")&&a<s){o.val(a+n);o.trigger("change")}})};v.stickUpSells=function(){if(!v.$body.hasClass("product-style-3")){return}var e=g("#topbar"),t=g("#masthead"),o=g(".side-products");if(!o.length){return}var a=g("#primary");var i=e.length?e.outerHeight():0;i+=t.length?t.outerHeight():0;g(window).on("scroll",function(){if(g(document).scrollTop()>=i){o.addClass("sticky");if(!o.data("wrap")){o.wrap('<div id="upsells-wrap" class="upsells-wrap"/>');o.data("wrap",true)}}else{o.removeClass("sticky");if(o.data("wrap")){o.unwrap();o.data("wrap",false)}}if(g(window).scrollTop()>=a.offset().top+a.outerHeight()-window.innerHeight){var e=g("#upsells-wrap");e.addClass("sticky-bottom").css("top",function(){return g(window).scrollTop()-a.offset().top});if(e.outerHeight()<=o.outerHeight()){e.addClass("reach-bottom")}else{e.removeClass("reach-bottom")}}else{g("#upsells-wrap").removeClass("sticky-bottom").css("top",0)}}).trigger("scroll")};v.sideProductsCarousel=function(){if(!v.$body.hasClass("product-style-3")){return}var e=g(".side-products");if(!e.length){return}if(e.find("li.product").length>4){e.find("ul.products").addClass("owl-carousel").owlCarousel({rtl:v.data.isRTL==="1",owl2row:true,owl2rowTarget:"product",dots:true,nav:true,navText:['<svg viewBox="0 0 20 20"><use xlink:href="#left-arrow"></use></svg>','<svg viewBox="0 0 20 20"><use xlink:href="#right-arrow"></use></svg>'],items:2,responsive:{0:{items:1},992:{items:1},1200:{items:2}}})}};v.productImagesLightbox=function(){if("1"!==v.data.lightbox){return}var s=g("div.product"),r=g("div.images",s),e=g(".woocommerce-product-gallery__slider .woocommerce-product-gallery__image",r);if(!r.length){return}r.on("click",".woocommerce-product-gallery__slider .woocommerce-product-gallery__image a",function(e){e.preventDefault();var t=l(),o=g(e.target),a=o.closest(".owl-item"),i={index:a.length?a.index():o.closest(".woocommerce-product-gallery__image").index(),history:false,bgOpacity:.85,showHideOpacity:true,mainClass:"pswp--minimal-dark",captionEl:true,fullscreenEl:false,shareEl:false,tapToClose:true,tapToToggleControls:false};var n=new PhotoSwipe(g(".pswp").get(0),window.PhotoSwipeUI_Default,t,i);if(r.hasClass("woocommerce-product-gallery--has-video")){r.find("video").each(function(){this.player.pause()});n.listen("afterChange",function(){window.wp.mediaelement.initialize();var e=g(n.currItem.container),t=e.children(".wp-video-shortcode"),o=t.width()/t.height();var a=n.viewportSize,i=a.y*.6,s=i*o;if(n.currItem.isVideo){e.find("video").each(function(){this.muted=false;this.controls=false;this.player.play()});v.$window.on("resize.sober_gallery_video",function(){e.children(".wp-video-shortcode").css({"max-width":s,"max-height":i,top:(a.y-i)/2,left:(a.x-s)/2})}).trigger("resize")}else{g(n.container).find("video").each(function(){this.player.pause()})}});n.listen("close",function(){if(s.hasClass("layout-style-6")||s.hasClass("layout-style-1")){r.find("video").each(function(){this.player.play()})}g(n.container).find("video").each(function(){if(this.player){this.player.pause()}});v.$window.off("resize.sober_gallery_video")})}n.init()});function l(){var l=[];if(e.length>0){e.each(function(e,t){var o=g(t),a=o.find("img"),i=a.attr("data-large_image"),s=a.attr("data-large_image_width"),n=a.attr("data-large_image_height"),r;if(o.hasClass("sober-product-video")){r={html:o.find("video.wp-video-shortcode").get(0).outerHTML.replace("muted",""),isVideo:true}}else{r={src:i,w:s,h:n,title:a.attr("data-caption")?a.attr("data-caption"):"",isVideo:false}}l.push(r)})}return l}};v.stickyProductSummary=function(){if(!g.fn.stick_in_parent){return}e();v.$window.on("resize",e);function e(){if(v.$window.width()>768){g("div.product .sticky-summary").stick_in_parent({parent:".product-summary"})}else{g("div.product .sticky-summary").trigger("sticky_kit:detach")}}};v.backToTop=function(){v.$body.on("click","#gotop",function(e){e.preventDefault();g("html, body").animate({scrollTop:0},"slow")})};v.toggleProductFilter=function(){v.$body.on("click",".toggle-filter",function(e){e.preventDefault();g(this).next(".filter-widgets").fadeIn(function(){g(this).addClass("active")})}).on("click",".filter-widgets button.close",function(){g(this).closest(".filter-widgets").fadeOut(function(){g(this).removeClass("active")})})};v.productQuickView=function(){if(!v.$body.hasClass("product-quickview-enable")){return}var e="ul.products .woocommerce-LoopProduct-link";switch(v.data.quickview){case"buy_button":e="ul.products .sober-loop-atc-button";break;case"view_button":e="ul.products .quick_view_button";break;case"title":e="ul.products h3 a";break}v.$body.on("click",e,function(e){if(v.$window.width()<=768){return}e.preventDefault();var t=g(this),o=t.data("product_id")?t.data("product_id"):t.closest(".product").find(".sober-loop-atc-button").data("product_id"),s=t.data("url")?t.data("url"):t.attr("href"),a=wc_add_to_cart_params?wc_add_to_cart_params.wc_ajax_url.toString().replace("%%endpoint%%","product_quick_view"):v.data.ajaxurl,n=g("#quick-view-modal"),r=n.find(".product"),l=n.find(".modal-header .close-modal").first().clone();if(!o){var i=t.closest(".product").get(0).classList.value.match(/post-\d*/);if(i){o=parseInt(i[0].replace("post-",""))}}r.hide().html("").addClass("invisible");n.addClass("loading");v.openModal(n);g.post(a,{action:"sober_get_product_quickview",product_id:o},function(e){var t=g(e.data);t.find("h1.product_title").wrapInner('<a href="'+s+'"></a>');r.show().html(t).prepend(l);var o=r.find(".images"),a=r.find(".variations_form"),i=o.find(".woocommerce-product-gallery__slider");i.find("img").css("height",r.outerHeight());if(i.children().length>1){i.addClass("owl-carousel").owlCarousel({rtl:v.data.isRTL==="1",items:1,smartSpeed:500,dots:false,nav:true,navText:['<svg width="20" height="20"><use xlink:href="#left-arrow"></use></svg>','<svg width="20" height="20"><use xlink:href="#right-arrow"></use></svg>']})}o.css("opacity",1);i.on("click",".woocommerce-product-gallery__image a",function(e){e.preventDefault()});a.wc_variation_form().find(".variations select:eq(0)").change();if(g.fn.tawcvs_variation_swatches_form){a.tawcvs_variation_swatches_form();v.modifyVariationSwatches(a)}a.on("reset_image found_variation",function(){i.trigger("to.owl.carousel",[0])});n.removeClass("loading");r.removeClass("invisible");if(typeof SimpleScrollbar!=="undefined"){SimpleScrollbar.initEl(t.find(".summary").get(0))}v.$body.trigger("sober_quickview_opened",[t,n,v])}).fail(function(){window.location.herf=s});if("buy_button"===v.data.quickview){return false}})};v.instanceSearch=function(){var n=null,r="",l={},e={},t=null,d=g("#search-modal"),c=d.find("form"),u=c.find("input.search-field"),f=d.find(".search-results"),m=f.find(".search-results-button"),p=d.find("input[name=post_type]").val();v.$body.on("click",'[data-toggle="modal"][data-target="search-modal"]',function(){u.focus()});d.on("keyup",".search-field",function(e){var t=false;if(typeof e.which==="undefined"){t=true}else if(typeof e.which==="number"&&e.which>0){t=!e.ctrlKey&&!e.metaKey&&!e.altKey}if(!t){return}if(n){n.abort()}o(true)}).on("change",".product-cats input",function(){if(n){n.abort()}clearTimeout(t);t=setTimeout(function(){o(false)},500)}).on("click",".search-reset",function(){if(n){n.abort()}d.addClass("reset");f.find(".results-container, .view-more-results").slideUp(function(){d.removeClass("searching searched found-products found-no-product invalid-length reset")})}).on("focusout",".search-field",function(){if(u.val().length<2){f.find(".results-container, .view-more-results").slideUp(function(){d.removeClass("searching searched found-products found-no-product invalid-length")})}});function o(e){var t=u.val(),o=c.find(".product-cats input:checked"),a=o.length?o.val():"",i=t+"["+a+"]";if(r===t&&e){return}r=t;if(t.length<2){d.removeClass("searching found-products found-no-product").addClass("invalid-length");return}var s=c.attr("action")+"?"+c.serialize();m.removeClass("soberFadeInUp");g(".view-more-results",f).slideUp(10);d.removeClass("found-products found-no-product").addClass("searching");if(i in l){h(l[i])}else{n=g.get(s,function(e){var t=g("#primary",e);if("product"===p){var o=g("ul.products",t);if(o.length){o.children(".last").nextAll().remove();l[i]={found:true,items:o,url:s}}else{l[i]={found:false,text:g(".woocommerce-info",t).text()}}}else if("post"===p){var a=g("#main article:lt(3)",t);if(a.length){a.addClass("col-md-4");l[i]={found:true,items:g('<div class="posts row" />').append(a),url:s}}else{l[i]={found:false,text:g(".no-results .page-header-none",t).text()}}}h(l[i]);d.addClass("searched")},"html")}}function h(e){var t="product"===p?"woocommerce":"sober-post-grid";d.removeClass("searching");if(e.found){var o=e.items.clone(),a=o.children();d.addClass("found-products");f.find(".results-container").addClass(t).html(o);for(var i=0;i<a.length;i++){g(a[i]).css("animation-delay",i*100+"ms")}a.addClass("soberFadeInUp soberAnimation");m.attr("href",e.url).css("animation-delay",i*100+"ms").addClass("soberFadeInUp soberAnimation");f.find(".results-container, .view-more-results").slideDown(300,function(){d.removeClass("invalid-length")});if("product"===p){v.$body.trigger("sober_products_loaded",[f])}else{v.$body.trigger("post-load")}}else{d.addClass("found-no-product");f.find(".results-container").removeClass(t).html(g('<div class="not-found text-center" />').text(e.text));m.attr("href","#");f.find(".view-more-results").slideUp(300);f.find(".results-container").slideDown(300,function(){d.removeClass("invalid-length")})}d.addClass("searched")}};v.fakeScrollbar=function(){var e=document.querySelector("#primary-menu.side-menu");if(e&&typeof SimpleScrollbar!=="undefined"){SimpleScrollbar.initEl(e)}};v.stickyHeader=function(){if(!v.data.sticky_header||"none"===v.data.sticky_header){return}var t=document.getElementById("masthead");var o=document.getElementById("topbar");var e=0;if(!t){return}s();v.$window.on("resize",s);if("smart"===v.data.sticky_header&&typeof Headroom!=="undefined"){e=o?o.clientHeight:1;var a=new Headroom(t,{offset:e,onTop:function(){setTimeout(function(){t.classList.remove("headroom--animation")},500)},onNotTop:function(){setTimeout(function(){t.classList.add("headroom--animation")},10)}});a.init()}else if("normal"===v.data.sticky_header){e=o?o.clientHeight:1;e=Math.max(e,1);i();v.$window.on("scroll",function(){i()})}function i(){if(v.$window.scrollTop()>=e){t.classList.add("sticky")}else{t.classList.remove("sticky")}}function s(){var e=v.$body.hasClass("header-white")||v.$body.hasClass("header-dark")||v.$body.hasClass("header-custom");if(!e){e=v.$body.hasClass("no-page-header")&&!v.$body.hasClass("page-title-hidden")&&!v.$body.hasClass("page-template-homepage")&&!v.$body.hasClass("product-style-5")}if(v.$body.hasClass("page-template-full-screen")){e=false}if(e){if(o){o.style.marginBottom=t.clientHeight+"px"}else{document.getElementById("page").style.paddingTop=t.clientHeight+"px"}}}};v.portfolioFilter=function(){var e=g(".portfolio-items:not(.sober-portfolio__row)");if(!e.length){return}var t={itemSelector:".portfolio",transitionDuration:700,isOriginLeft:!(v.data.isRTL==="1")};if(e.hasClass("portfolio-fullwidth")){t.masonry={columnWidth:".col-md-3"}}if(e.hasClass("portfolio-classic")){t.layoutMode="fitRows"}e.isotope(t);e.imagesLoaded().progress(function(){e.isotope("layout")});e.on("jetpack-lazy-loaded-image","img",function(){e.isotope("layout")});var o=g(".portfolio-filter");o.on("click","li",function(e){e.preventDefault();var t=g(this),o=t.attr("data-filter");if(t.hasClass("active")){return}t.addClass("active").siblings(".active").removeClass("active");t.closest(".portfolio-filter").next(".portfolio-items").isotope({filter:o})})};v.productVariationSwatches=function(){v.$body.on("tawcvs_initialized",function(){var e=g(".variations_form");v.modifyVariationSwatches(e)})};v.modifyVariationSwatches=function(e){var t=e.find(".variations .variable");var o=false;t.each(function(){if(g(this).hasClass("swatches")){o=true}});if(!o){e.removeClass("swatches-support")}if(t.length%2){t.last().addClass("wide-variable")}e.off("tawcvs_no_matching_variations");e.on("tawcvs_no_matching_variations",function(){event.preventDefault();e.find(".woocommerce-variation.single_variation").show();if(typeof wc_add_to_cart_variation_params!=="undefined"){e.find(".single_variation").stop(true,true).slideDown(500).html('<p class="invalid-variation-combination">'+wc_add_to_cart_variation_params.i18n_no_matching_variations_text+"</p>")}})};v.productGalleryZoom=function(){v.initZoom(".woocommerce-product-gallery__slider .woocommerce-product-gallery__image");g(".woocommerce-product-gallery--with-images").on("woocommerce_gallery_init_zoom",function(){var e=g(".woocommerce-product-gallery__image",this).first().trigger("zoom.destroy");v.initZoom(e)}).on("click",".zoomImg",function(){g(this).prev("a").trigger("click")})};v.initZoom=function(e){if(!v.data.zoom||!g.fn.zoom){return}var t=g(e),a=t.width(),i=false;t.each(function(e,t){var o=g(t).find("img");if(o.data("large_image_width")>a){i=true;return false}});if(i){var o={touch:false};if("ontouchstart"in window){o.on="click"}t.trigger("zoom.destroy");t.zoom(o)}};v.productGallerySlider=function(){var e=g(".woocommerce div.product"),t=g("div.images",e),o=g(".woocommerce-product-gallery__slider",t),a=g(".thumbnails",t);if(t.hasClass("woocommerce-product-gallery--has-video")){var i=o.find("video");if(e.hasClass("layout-style-6")||e.hasClass("layout-style-1")){i.get(0).player.play()}else{o.on("initialized.owl.carousel translated.owl.carousel",function(e){var t=o.find(".owl-item:eq("+e.item.index+")");if(t.children(".woocommerce-product-gallery__image").hasClass("sober-product-video")){i.get(0).player.play()}else{i.get(0).player.pause()}})}}if(!e.hasClass("layout-style-6")&&o.children().length>1){if(e.hasClass("layout-style-1")){if(v.$window.width()<992&&!o.hasClass("owl-carousel")){o.addClass("owl-carousel").owlCarousel({rtl:v.data.isRTL==="1",items:1,dots:true,loop:false,margin:10})}else if(v.$window.width()>=992&&o.hasClass("owl-carousel")){o.trigger("destroy.owl.carousel").removeClass("owl-carousel")}}else if(e.hasClass("layout-style-4")){var s=o.children().length>2?1:0;o.addClass("owl-carousel").owlCarousel({rtl:v.data.isRTL==="1",items:2,startPosition:s,loop:false,margin:30,center:true,dots:true,nav:true,navText:['<svg viewBox="0 0 20 20"><use xlink:href="#left-arrow"></use></svg>','<svg viewBox="0 0 20 20"><use xlink:href="#right-arrow"></use></svg>'],responsive:{0:{items:1,nav:false},768:{items:2,nav:true}},onInitialized:function(){v.initZoom(".woocommerce-product-gallery__slider .woocommerce-product-gallery__image")}})}else if(!o.hasClass("owl-loaded")){var n=e.hasClass("layout-style-5")?false:!!v.data.product_gallery_autoheight;o.addClass("owl-carousel").owlCarousel({rtl:v.data.isRTL==="1",dots:true,items:1,loop:false,autoHeight:n})}}else if(e.hasClass("layout-style-6")&&o.children().length>1){if(v.$window.width()<992){o.addClass("owl-carousel").owlCarousel({rtl:v.data.isRTL==="1",dots:true,items:1,loop:false,margin:10,autoHeight:true})}else{o.trigger("destroy.owl.carousel").removeClass("owl-carousel")}}t.css("opacity",1);t.on("click",".thumbnails .woocommerce-product-gallery__image a",function(e){e.preventDefault();var t=g(this).closest(".woocommerce-product-gallery__image");o.trigger("to.owl.carousel",[t.index()])});o.on("translated.owl.carousel",function(e){a.children().removeClass("active").eq(e.item.index).addClass("active")});g(".variations_form",e).on("reset_image found_variation",function(){o.trigger("to.owl.carousel",[0])}).on("reset_image",function(){a.children(":eq(0)").find("img").wc_reset_variation_attr("src")}).on("found_variation",function(e,t){a.children(":eq(0)").find("img").wc_set_variation_attr("src",t.image.gallery_thumbnail_src?t.image.gallery_thumbnail_src:t.image.thumb_src)})};v.productFullWidth=function(){var e=g(".woocommerce div.product");if(!e.length){return}var t=e.find(".product-summary"),o=e.find(".product-toolbar"),a=g("#masthead");if(e.hasClass("layout-style-5")||e.hasClass("layout-style-6")){i();v.$window.on("resize load",function(){i()})}if(e.hasClass("layout-style-5")){s();v.$window.on("resize load",function(){s()})}function i(){var e=v.$window.width();t.width(e);o.width(e);if(v.data.isRTL){t.css("marginRight",-e/2);o.css("marginRight",-e/2)}else{t.css("marginLeft",-e/2);o.css("marginLeft",-e/2)}}function s(){t.css("paddingTop",a.outerHeight())}};v.productBackground=function(){if(typeof BackgroundColorTheif=="undefined"){return}if(!v.data.product_gallery_autobg){return}var o=g(".woocommerce div.product");if(!o.hasClass("layout-style-5")){return}var e=o.find("div.images"),t=e.find(".woocommerce-product-gallery__slider"),a=e.find(".wp-post-image"),i=new BackgroundColorTheif;if(!o.hasClass("background-set")){a.one("load",function(){setTimeout(function(){s(a.get(0))},100)}).each(function(){if(this.complete){g(this).trigger("load")}});e.on("jetpack-lazy-loaded-image",".wp-post-image",function(){g(this).one("load",function(){s(this)})})}if(!o.hasClass("background-set-all")){t.on("translate.owl.carousel",function(e){setTimeout(function(){s(t.find(".owl-item").eq(e.item.index).find("img").get(0))},150)});e.on("woocommerce_gallery_reset_slide_position",function(){s(a.get(0))})}function s(e){if(typeof e==="undefined"||e.src===""){return}if(e.classList.contains("jetpack-lazy-image")){if(!e.dataset["lazyLoaded"]){return}}var t=i.getBackGroundColor(e);o.find(".product-summary").get(0).style.backgroundColor="rgb("+t[0]+","+t[1]+","+t[2]+")"}};v.relatedProductsCarousel=function(){if(!v.data.related_products_carousel){return}var e=g(".related.products ul.products");if(!e.length){return}var t=4;if(v.$body.hasClass("product-style-1")||v.$body.hasClass("product-style-2")){t=5}e.addClass("owl-carousel").owlCarousel({rtl:v.data.isRTL==="1",items:t,loop:false,dots:true,nav:false,responsive:{0:{items:1},320:{items:2},768:{items:3},1024:{items:4},1366:{items:t}}})};v.upsellProductsCarousel=function(){if(!v.data.upsell_products_carousel){return}var e=g(".upsells.products ul.products");if(!e.length){return}var t=4;if(v.$body.hasClass("product-style-1")||v.$body.hasClass("product-style-2")){t=5}e.addClass("owl-carousel").owlCarousel({rtl:v.data.isRTL==="1",items:t,loop:false,dots:true,nav:false,responsive:{0:{items:1},320:{items:2},768:{items:3},1024:{items:4},1366:{items:t}}})};v.productImageZoom=function(){g(".product-thumbnail-zoom").each(function(){var e=g(this);e.zoom({url:e.attr("data-zoom_image")})});v.$body.on("soo_filter_request_success",function(){g(".product-thumbnail-zoom",".archive.woocommerce #primary ul.products").each(function(){var e=g(this);e.zoom({url:e.attr("data-zoom_image")})})});v.$body.on("sober_products_loaded",function(e,t){g(t).imagesLoaded(function(){var e=g(".product-thumbnail-zoom",t);if(e.length){e.each(function(){var e=g(this);e.zoom({url:e.attr("data-zoom_image")})})}})})};v.productImageSlider=function(){var e=g("ul.products");e.each(function(){if(!g(this).parents().is(".side-products")){v.initProductThumbnailSlider(this)}});g(".sober-product-carousel").on("initialized.owl.carousel",function(){g(".product-images__slider").trigger("refresh.owl.carousel")});v.$body.on("soo_filter_request_success",function(){v.initProductThumbnailSlider(g(".archive.woocommerce #primary ul.products"))});v.$body.on("sober_products_loaded",function(e,t){v.initProductThumbnailSlider(t)})};v.initProductThumbnailSlider=function(e){g(e).imagesLoaded(function(){g(".product-images__slider",e).owlCarousel({items:1,lazyLoad:true,dots:false,nav:true,rtl:v.data.isRTL==="1",navText:['<svg viewBox="0 0 14 20"><use xlink:href="#left"></use></svg>','<svg viewBox="0 0 14 20"><use xlink:href="#right"></use></svg>']}).on("resize.owl.carousel initialized.owl.carousel",function(){g(".woocommerce.archive .site-content ul.products").isotope("layout")})})};v.singeProductAjaxAddToCart=function(){if("yes"!==v.data.single_ajax_add_to_cart){return}v.$body.on("submit","form.cart",function(){var e=g(this),a=e.find(".single_add_to_cart_button"),t=e.attr("action")?e.attr("action"):window.location.href;if(a.hasClass("loading")){return false}if("GET"===e.attr("method").toUpperCase()||e.closest("div.product").hasClass("product-type-external")){return}a.removeClass("added").addClass("loading disabled").prop("disabled",true);if(a.attr("name")){data+="&"+encodeURI(a.attr("name"))+"="+encodeURI(a.attr("value"))}g.ajax({url:t,data:e.serialize()+"&sober_add_to_cart_nonce="+v.data.nonces.add_to_cart,method:e.attr("method")?e.attr("method").toUpperCase():"POST",success:function(e){a.removeClass("loading disabled").addClass("added").prop("disabled",false);if(v.data.open_cart_modal_after_add!=="1"){var t=g(e).find(".woocommerce-error, .woocommerce-info, .woocommerce-message"),o=g(".sober-alert-bar");if(t.length){if(!o.length){o=g('<div class="sober-alert-bar"></div>');v.$body.append(o)}o.html(t);setTimeout(function(){o.addClass("active")},500);if(t.hasClass("woocommerce-message")){setTimeout(function(){o.removeClass("active")},5e3)}}}else{v.$body.trigger("added_to_cart")}v.$body.trigger("wc_fragment_refresh");if(typeof wc_add_to_cart_params!=="undefined"){if(wc_add_to_cart_params.cart_redirect_after_add==="yes"&&wc_add_to_cart_params.cart_url){window.location.href=wc_add_to_cart_params.cart_url}}}});return false});v.$body.on("click",".sober-alert-bar .close",function(e){e.preventDefault();g(this).closest(".sober-alert-bar").removeClass("active")})};v.openCartModalAfterAdd=function(){if(v.data.open_cart_modal_after_add!=="1"){return}v.$body.on("added_to_cart",function(){if(g("#cart-modal").hasClass("open")){return}v.closeModal();v.openModal("#cart-modal","cart")})};v.pageHeaderParallax=function(){if(typeof Rellax==="undefined"){return}var e=g(".page-header .page-title"),t=g(".page-header .breadcrumb");if("up"===v.data.page_header_parallax){if(e.length){new Rellax(".page-header .page-title",{speed:1})}if(t.length){new Rellax(".page-header .breadcrumb",{speed:2})}}else if("down"===v.data.page_header_parallax){if(e.length){new Rellax(".page-header .page-title",{speed:-2})}if(t.length){new Rellax(".page-header .breadcrumb",{speed:-1})}}};v.preload=function(){var e=g("#preloader");if(!e.length){return}var t=false;v.$body.on("click","a[href^=mailto], a[href^=tel]",function(){t=true});v.$window.on("beforeunload",function(){if(!t){e.fadeIn("slow")}t=false});e.fadeOut(800)};v.responsive=function(){v.responsiveVideos();v.$window.on("resize",v.productGallerySlider)};v.responsiveVideos=function(){v.$body.fitVids()};v.popup=function(){var i=parseInt(v.data.popup_frequency),e=parseInt(v.data.popup_visible_delay);if(i>0&&document.cookie.match(/^(.*;)?\s*sober_popup\s*=\s*[^;]+(.*)?$/)){return}e=Math.max(e,0);e="delay"===v.data.popup_visible?e:0;v.$window.on("load",function(){setTimeout(function(){v.openModal("#popup")},e*1e3)});v.$body.on("sober_modal_closed",function(e,t){if(!t.hasClass("sober-popup")){return}var o=new Date,a=o.getTime();o.setTime(o.getTime()+i*24*60*60*1e3);document.cookie="sober_popup="+a+";expires="+o.toGMTString()+";path=/"});v.$body.on("click",".sober-popup .close-popup-trigger",function(){v.closeModal()})};v.addedToCartNotice=function(){if(!v.data.added_to_cart_notice||!g.fn.notify){return}g.notify.addStyle("sober",{html:'<div><svg viewBox="0 0 20 20" class="message-icon"><use xlink:href="#success" href="#success"></use></svg><span data-notify-text/></div>'});g(document).on("added_to_cart",function(){g.notify(v.data.l10n.added_to_cart_notice,{autoHideDelay:2e3,className:"success",style:"sober",showAnimation:"fadeIn",hideAnimation:"fadeOut"})})};v.checkoutTerms=function(){v.$body.off("click","a.woocommerce-terms-and-conditions-link")};v.fixVC=function(){if(v.data.isRTL!=="1"){return}g(document).on("vc-full-width-row-single",function(e,t){t.el.css({left:"auto",right:t.offset})})};v.loginModalAuthenticate=function(){g("#login-modal").on("submit",".woocommerce-form-login",function(e){var t=g("input[name=username]",this).val(),o=g("input[name=password]",this).val(),a=g("input[name=rememberme]",this).is(":checked"),i=g("input[name=woocommerce-login-nonce]",this).val(),s=g("[type=submit]",this),n=g(this),r=n.next(".woocommerce-error");if(!t||!o){g("input[name=username]",this).focus();return false}e.preventDefault();s.addClass("loading");if(r.length){r.fadeOut()}g.post(v.data.ajaxurl,{action:"sober_login_authenticate",username:t,password:o,remember:a,security:i},function(e){if(!e.success){if(!r.length){r=g('<div class="woocommerce-error sober-message-box danger"/>');r.append('<svg viewBox="0 0 20 20" class="message-icon"><use xlink:href="#warning"></use></svg>').append('<div class="box-content"></div>').append('<a class="close" href="#"><svg viewBox="0 0 14 14"><use xlink:href="#close-delete-small"></use></svg></a>');r.hide().insertAfter(n)}r.find(".box-content").html(e.data);r.fadeIn();s.removeClass("loading")}else{window.location.reload()}})})};v.lazyLoadImages=function(){v.$body.on("post-load sober_products_loaded soo_filter_request_success sober_quickview_opened",function(){var e=document.createEvent("Event");e.initEvent("jetpack-lazy-images-load",true,true);document.body.dispatchEvent(e)})};g(function(){v.init()})})(jQuery);